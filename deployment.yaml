apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-world-node # Should match your K8S_DEPLOYMENT_NAME secret
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hello-world-node
  template:
    metadata:
      labels:
        app: hello-world-node
    spec:
      containers:
      # Your Application Container
      - name: hello-world-node # Should match your K8S_CONTAINER_NAME secret
        image: moonsol124/hello-world-node:latest # This image tag will be updated by your workflow
        imagePullPolicy: Always # Ensures K8s checks for new images even if tag is 'latest'
        ports:
        - containerPort: 3000 # The port your Node.js app listens on
        envFrom: # Inject environment variables from the specified Secret
        - secretRef:
            name: db-credentials # The name of the Kubernetes Secret you created